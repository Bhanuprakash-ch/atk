<!--

     Copyright (c) 2015 Intel Corporation 

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.

-->
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Data Sources &mdash; Trusted Analytics Platform 0.6.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../R_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../R_static/css/spc-extend.css">
    <link rel="stylesheet" href="../../R_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../../R_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../R_static/jquery.js"></script>
    <script type="text/javascript" src="../../R_static/underscore.js"></script>
    <script type="text/javascript" src="../../R_static/doctools.js"></script>
    <script type="text/javascript" src="../../R_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" >
    <link rel="top" title="Trusted Analytics Platform 0.6.0 documentation" href="../../index.html" >
    <link rel="up" title="Python API" href="../index.html" >
    <link rel="next" title="Frames" href="../frames/index.html" >
    <link rel="prev" title="Data Types" href="../datatypes/index.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../../index.html">Trusted Analytics</a></li>
	
          <li class="active"><a href="../index.html" accesskey="U">Python API</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../datatypes/index.html" title="Data Types"
           accesskey="P">previous</a>
      </li>
      <li class="active">
        <a href="../frames/index.html" title="Frames"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="../../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Technical Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ds_over.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_over.html">Extending Trusted Analytics Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ad_over.html">Administration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../connect.html">Connect to the Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datatypes/index.html">Data Types</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frames/index.html">Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphs/index.html">Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/index.html">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rest_api/v1/index.html">REST API</a></li>
</ul>
<ul class="simple">
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="data-sources">
<h1>Data Sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#csvfile" id="id1">CsvFile</a></li>
<li><a class="reference internal" href="#hivequery" id="id2">HiveQuery</a></li>
<li><a class="reference internal" href="#hbasetable" id="id3">HBaseTable</a></li>
<li><a class="reference internal" href="#jdbctable" id="id4">JdbcTable</a></li>
<li><a class="reference internal" href="#jsonfile" id="id5">JsonFile</a></li>
<li><a class="reference internal" href="#linefile" id="id6">LineFile</a></li>
<li><a class="reference internal" href="#pandas" id="id7">Pandas</a></li>
<li><a class="reference internal" href="#uploadrows" id="id8">UploadRows</a></li>
<li><a class="reference internal" href="#xmlfile" id="id9">XmlFile</a></li>
</ul>
</div>
<div class="section" id="csvfile">
<h2><a class="toc-backref" href="#id1">CsvFile</a><a class="headerlink" href="#csvfile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.CsvFile">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">CsvFile</code><span class="sig-paren">(</span><em>file_name</em>, <em>schema</em>, <em>delimiter='</em>, <em>'</em>, <em>skip_header_lines=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.CsvFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a CSV file.</p>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#trustedanalytics.CsvFile.field_names" title="trustedanalytics.CsvFile.field_names"><code class="xref py py-obj docutils literal"><span class="pre">field_names</span></code></a></td>
<td>Schema field names from the CsvFile class.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#trustedanalytics.CsvFile.field_types" title="trustedanalytics.CsvFile.field_types"><code class="xref py py-obj docutils literal"><span class="pre">field_types</span></code></a></td>
<td>Schema field types from the CsvFile class.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trustedanalytics.CsvFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>file_name</em>, <em>schema</em>, <em>delimiter='</em>, <em>'</em>, <em>skip_header_lines=0</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.CsvFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a CSV file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_name</strong> : str</p>
<blockquote>
<div><p>The name of the file containing data in a CSV format.
The file must be in the Hadoop file system.
Relative paths are interpreted as being relative to the path set in
the application configuration file.
See <span class="xref std std-ref">Configure File System Root</span>.
Absolute paths (beginning with <code class="docutils literal"><span class="pre">hdfs://...</span></code>, for example) are also
supported.</p>
</div></blockquote>
<p><strong>schema</strong> : list of tuples of the form (string, type)</p>
<blockquote>
<div><p>A description of the fields of data in the form of a list of tuples,
which describe each field.
Each tuple is in the form (name, type), where the name is a string,
and type is a supported data type,
Upon import of the data, the name becomes the name of a column, so the
names must be unique and follow column naming rules.
For a list of valid data types, see <a class="reference internal" href="../datatypes/index.html#api-datatypes"><span>Data Types</span></a>.
The type <code class="docutils literal"><span class="pre">ignore</span></code> may also be used if the field should be ignored on
loads.</p>
</div></blockquote>
<p><strong>delimiter</strong> : str (optional)</p>
<blockquote>
<div><p>A string which indicates the separation of the data fields.
This is usually a single character and could be a non-visible character
such as a tab.
This string must be enclosed by quotes in the command declaration, for
example <code class="docutils literal"><span class="pre">&quot;,&quot;</span></code>.</p>
</div></blockquote>
<p><strong>skip_header_lines</strong> : int (optional)</p>
<blockquote>
<div><p>An integer for the numbers of lines to skip before parsing records.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">class</p>
<blockquote class="last">
<div><p>A class which holds both the name and schema of a CSV file.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Unicode characters should not be used in the column name, because some
functions do not support them and will not operate properly.</p>
<p class="rubric">Examples</p>
<p>Given a raw data file named &#8216;raw_data.csv&#8217;, located at
&#8216;hdfs://localhost.localdomain/user/trusted/data/&#8217;.
It consists of three columns, <em>a</em>, <em>b</em>, and <em>c</em>.
The columns have the data types <em>int32</em>, <em>int32</em>, and <em>str</em> respectively.
The fields of data are separated by commas.
There is no header to the file.</p>
<p>Import the Trusted Analytics Platform:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
</pre></div>
</div>
<p>Define the data:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_schema</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]</span>
</pre></div>
</div>
<p>Create a CsvFile object with this schema:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_define</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;data/raw_data.csv&quot;</span><span class="p">,</span> <span class="n">csv_schema</span><span class="p">)</span>
</pre></div>
</div>
<p>The default delimiter, a comma, was used to separate fields in the file, so
it was not specified.
If the columns of data were separated by a character other than comma, the
appropriate delimiter would be specified.
For example if the data columns were separated by the colon character, the
instruction would be:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;data/raw_data.csv&quot;</span><span class="p">,</span> <span class="n">csv_schema</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the data had some lines of header at the beginning of the file, the
lines should be skipped:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_data</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;data/raw_data.csv&quot;</span><span class="p">,</span> <span class="n">csv_schema</span><span class="p">,</span> <span class="n">skip_header_lines</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>For other examples see <a class="reference internal" href="../../ds_dflw.html#example-files-csvfile"><span>Importing a CSV File</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="trustedanalytics.CsvFile.field_names">
<code class="descname">field_names</code><a class="headerlink" href="#trustedanalytics.CsvFile.field_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema field names from the CsvFile class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>A list of field name strings.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a raw data file &#8216;raw_data.csv&#8217; with columns <em>col1</em> (<em>int32</em>)
and <em>col2</em> (<em>float32</em>):</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_class</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;raw_data.csv&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">csv_class</span><span class="o">.</span><span class="n">field_names</span><span class="p">())</span>
</pre></div>
</div>
<p>Results:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="trustedanalytics.CsvFile.field_types">
<code class="descname">field_types</code><a class="headerlink" href="#trustedanalytics.CsvFile.field_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema field types from the CsvFile class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list</p>
<blockquote class="last">
<div><p>A list of field types.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a raw data file &#8216;raw_data.csv&#8217; with columns <em>col1</em> (<em>int32</em>)
and <em>col2</em> (<em>float32</em>):</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_class</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;raw_data.csv&quot;</span><span class="p">,</span> <span class="n">schema</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">csv_class</span><span class="o">.</span><span class="n">field_types</span><span class="p">())</span>
</pre></div>
</div>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">csv_class</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">CsvFile</span><span class="p">(</span><span class="s2">&quot;raw_data.csv&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">schema</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">csv_class</span><span class="o">.</span><span class="n">field_types</span><span class="p">())</span>
</pre></div>
</div>
<p>Results:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hivequery">
<h2><a class="toc-backref" href="#id2">HiveQuery</a><a class="headerlink" href="#hivequery" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.HiveQuery">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">HiveQuery</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.HiveQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the sql query to retrieve the data from a Hive table.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">to_json</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trustedanalytics.HiveQuery.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.HiveQuery.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the sql query to retrieve the data from a Hive table.</p>
<p>Only a subset of Hive data types are supported.</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span>Data Type   Support
___________ ____________________________________

boolean     cast to int

bigint      native support
int         native support
tinyint     cast to int
smallint    cast to int

decimal     cast to double, may lose precision
double      native support
float       native support

date        cast to string
string      native support
timestamp   cast to string
varchar     cast to string

arrays      not supported
binary      not supported
char        not supported
maps        not supported
structs     not supported
union       not supported
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>query</strong> : str</p>
<blockquote>
<div><p>The sql query to retrieve the data</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>class</strong> : HiveQuery object</p>
<blockquote class="last">
<div><p>An object which holds Hive sql query.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a Hive table <em>person</em> having <em>name</em> and <em>age</em> among other columns.
A simple query could be to get the query for the name and age
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Define the data:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hive_query</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">HiveQuery</span><span class="p">(</span><span class="s2">&quot;select name, age from person&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a frame using the object:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">hive_query</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hbasetable">
<h2><a class="toc-backref" href="#id3">HBaseTable</a><a class="headerlink" href="#hbasetable" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.HBaseTable">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">HBaseTable</code><span class="sig-paren">(</span><em>table_name</em>, <em>schema</em>, <em>start_row=None</em>, <em>end_row=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.HBaseTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the object to retrieve the data from an hBase table. A note on how
we support various overwrite/append scenarios (see below):</p>
<ol class="arabic simple">
<li>create a simple hbase table from csv
load csv into a frame using existing frame api
save the frame into hbase (it creates a table - lets call it table1)</li>
<li>overwrite existing table with new data
do scenario 1 and create table1
load the second csv into a frame
save the frame into table1 (old data is gone)</li>
<li>append data to the existing table 1
do scenario 1 and create table1
load table1 into frame1
load csv into frame2
let frame1 = frame1 + frame2 (concatenate frame2 into frame1)
save frame1 into base as table1 (overwrite with initial + appended data)</li>
</ol>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">to_json</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trustedanalytics.HBaseTable.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>table_name</em>, <em>schema</em>, <em>start_row=None</em>, <em>end_row=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.HBaseTable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the object to retrieve the data from an hBase table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>my_table</strong> : str</p>
<blockquote>
<div><p>The table name</p>
</div></blockquote>
<p><strong>schema</strong> : List of (column family, column name, data type for the cell value)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>class</strong> : HBaseTable object</p>
<blockquote class="last">
<div><p>An object which holds hBase data.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">HBaseTable</span> <span class="p">(</span><span class="s2">&quot;my_table&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;pants&quot;</span><span class="p">,</span> <span class="s2">&quot;aisle&quot;</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;pants&quot;</span><span class="p">,</span> <span class="s2">&quot;row&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),(</span> <span class="s2">&quot;shirts&quot;</span><span class="p">,</span> <span class="s2">&quot;aisle&quot;</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">),(</span><span class="s2">&quot;shirts&quot;</span><span class="p">,</span> <span class="s2">&quot;row&quot;</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="jdbctable">
<h2><a class="toc-backref" href="#id4">JdbcTable</a><a class="headerlink" href="#jdbctable" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.JdbcTable">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">JdbcTable</code><span class="sig-paren">(</span><em>table_name</em>, <em>connector_type=None</em>, <em>url=None</em>, <em>driver_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.JdbcTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the object to retrieve the data from an jdbc table.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">to_json</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trustedanalytics.JdbcTable.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>table_name</em>, <em>connector_type=None</em>, <em>url=None</em>, <em>driver_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.JdbcTable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the object to retrieve the data from an jdbc table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>table_name</strong> : str</p>
<blockquote>
<div><p>the table name</p>
</div></blockquote>
<p><strong>connector_type</strong> : str</p>
<blockquote>
<div><p>the connector type</p>
</div></blockquote>
<p><strong>url</strong> : str</p>
<blockquote>
<div><p>Jdbc connection string (as url)</p>
</div></blockquote>
<p><strong>driver_name</strong> : str</p>
<blockquote>
<div><p>An optional driver name</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>class</strong> : JdbcTable object</p>
<blockquote class="last">
<div><p>An object which holds jdbc data.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">jdbcTable</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">JdbcTable</span> <span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="go">                              &quot;jdbc:sqlserver://localhost/SQLExpress;databasename=somedatabase;user=someuser;password=somepassord&quot;,</span>
<span class="go">                              &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;,</span>
<span class="go">                              &quot;select * FROM SomeTable&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">jdbcTable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="jsonfile">
<h2><a class="toc-backref" href="#id5">JsonFile</a><a class="headerlink" href="#jsonfile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.JsonFile">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">JsonFile</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.JsonFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a file as having data in JSON format.</p>
<dl class="method">
<dt id="trustedanalytics.JsonFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.JsonFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a file as having data in JSON format.
When JSON files are loaded into the system all top level JSON objects are
recorded into the frame as seperate elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_name</strong> : str</p>
<blockquote>
<div><p>Name of data input file.
File must be in the Hadoop file system.
Relative paths are interpreted relative to the
<code class="docutils literal"><span class="pre">trustedanalytics.atk.engine.fs.root</span></code> configuration.
Absolute paths (beginning with <code class="docutils literal"><span class="pre">hdfs://...</span></code>, for example) are also
supported.
See <span class="xref std std-ref">Configure File System Root</span>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">class</p>
<blockquote class="last">
<div><p>An object which holds both the name and tag of a JSON file.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a raw data file named &#8216;raw_data.json&#8217; located at
&#8216;hdfs://localhost.localdomain/user/trusted/data/&#8217;.
It consists of a 3 top level json objects with a single value each called
obj. Each object contains the attributes color, size, and shape.</p>
<p>The example JSON file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;square&quot;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="p">{</span> <span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;triangle&quot;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="p">{</span> <span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;square&quot;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Import the Trusted Analytics Platform:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Define the data:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">json_file</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">JsonFile</span><span class="p">(</span><span class="s2">&quot;data/raw_data.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a frame using this JsonFile:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The frame looks like:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span>  data_lines
/------------------------/
  &#39;{ &quot;obj&quot;: {
      &quot;color&quot;: &quot;blue&quot;,
      &quot;size&quot;: 3,
      &quot;shape&quot;: &quot;square&quot; }
  }&#39;
  &#39;{ &quot;obj&quot;: {
      &quot;color&quot;: &quot;green&quot;,
      &quot;size&quot;: 7,
      &quot;shape&quot;: &quot;triangle&quot; }
  }&#39;
  &#39;{ &quot;obj&quot;: {
      &quot;color&quot;: &quot;orange&quot;,
      &quot;size&quot;: 10,
      &quot;shape&quot;: &quot;square&quot; }
  }&#39;
</pre></div>
</div>
<p>Parse values out of the XML column using the add_columns method:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_my_json</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">json</span>
<span class="gp">... </span>    <span class="n">my_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">obj</span> <span class="o">=</span> <span class="n">my_json</span><span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span><span class="n">parse_my_json</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span>
<span class="gp">... </span><span class="p">(</span><span class="s2">&quot;shape&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)])</span>
</pre></div>
</div>
<p>Original XML column is no longer necessary:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">drop_columns</span><span class="p">([</span><span class="s1">&#39;data_lines&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Result:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go">  color:str   size:str    shape:str</span>
<span class="go">/-----------------------------------/</span>
<span class="go">  blue        3           square</span>
<span class="go">  green       7           triangle</span>
<span class="go">  orange      10          square</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="linefile">
<h2><a class="toc-backref" href="#id6">LineFile</a><a class="headerlink" href="#linefile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.LineFile">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">LineFile</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.LineFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a line-separated file.</p>
<dl class="method">
<dt id="trustedanalytics.LineFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>file_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.LineFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a line-separated file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_name</strong> : str</p>
<blockquote>
<div><p>Name of data input file.
File must be in the Hadoop file system.
Relative paths are interpreted relative to the
<code class="docutils literal"><span class="pre">trustedanalytics.atk.engine.fs.root</span></code> configuration.
Absolute paths (beginning with <code class="docutils literal"><span class="pre">hdfs://...</span></code>, for example) are also
supported.
See <span class="xref std std-ref">Configure File System Root</span>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">class</p>
<blockquote class="last">
<div><p>A class which holds the name of a Line File.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a raw data file &#8216;rawline_data.txt&#8217; located at
&#8216;hdfs://localhost.localdomain/user/trusted/data/&#8217;.
It consists of multiple lines separated by new line character.</p>
<p>Import the Trusted Analytics Platform:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Define the data:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">linefile_class</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">LineFile</span><span class="p">(</span><span class="s2">&quot;data/rawline_data.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pandas">
<h2><a class="toc-backref" href="#id7">Pandas</a><a class="headerlink" href="#pandas" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.Pandas">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">Pandas</code><span class="sig-paren">(</span><em>pandas_frame</em>, <em>schema</em>, <em>row_index=True</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.Pandas" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a pandas data source</p>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#trustedanalytics.Pandas.field_names" title="trustedanalytics.Pandas.field_names"><code class="xref py py-obj docutils literal"><span class="pre">field_names</span></code></a></td>
<td>Schema field names.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#trustedanalytics.Pandas.field_types" title="trustedanalytics.Pandas.field_types"><code class="xref py py-obj docutils literal"><span class="pre">field_types</span></code></a></td>
<td>Schema field types</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trustedanalytics.Pandas.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>pandas_frame</em>, <em>schema</em>, <em>row_index=True</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.Pandas.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a pandas data source</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pandas_frame</strong> : a pandas dataframe object</p>
<p><strong>schema</strong> : list of tuples of the form (string, type)</p>
<blockquote>
<div><p>schema description of the fields for a given line.
It is a list of tuples which describe each field, (field name, field type),
where the field name is a string, and file is a supported type,
(See data_types from the atktypes module).
Unicode characters should not be used in the column name.</p>
</div></blockquote>
<p><strong>row_index</strong> : boolean (optional)</p>
<blockquote>
<div><p>indicates if the row_index is present in the pandas dataframe and needs to be ignored when looking at the
data values.
Default value is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">class</p>
<blockquote class="last">
<div><p>An object which holds both the pandas dataframe and schema associated with it.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>For this example, we are going to create a 0-5 ratings system with corresponding descriptions.
It consists of two columns, rating number and rating description.
The columns have the data types, int32 and string.</p>
<p>First import trustedanalytics and pandas:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="kn">import</span> <span class="nn">pandas</span>
</pre></div>
</div>
<p>Connect:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Create data:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ratings_data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;invalid&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Very Poor&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Poor&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;Average&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Good&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;Very Good&quot;</span><span class="p">]]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ratings_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rating_id&#39;</span><span class="p">,</span> <span class="s1">&#39;rating_text&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>At this point create a schema that defines the data:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;rating_id&#39;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;rating_text&#39;</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">)]</span>
</pre></div>
</div>
<p>Now build a PandasFrame object with this schema:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ratings</span><span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">Pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">schema</span><span class="p">))</span>
</pre></div>
</div>
<dl class="docutils">
<dt>To check the result:: </dt>
<dd>ratings.inspect()</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="trustedanalytics.Pandas.field_names">
<code class="descname">field_names</code><a class="headerlink" href="#trustedanalytics.Pandas.field_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema field names.</p>
<p>List of field names from the schema stored in the trustedanalytics pandas dataframe object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list of string</p>
<blockquote class="last">
<div><p>Field names</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>For this example, we are going to use a pandas dataframe object <em>your_pandas</em> .
It will have two columns <em>col1</em> and <em>col2</em> with types of <em>int32</em> and <em>float32</em> respectively:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_pandas</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">PandasFrame</span><span class="p">(</span><span class="n">your_pandas</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">)])</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_pandas</span><span class="o">.</span><span class="n">field_names</span><span class="p">())</span>
</pre></div>
</div>
<p>The output would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="trustedanalytics.Pandas.field_types">
<code class="descname">field_types</code><a class="headerlink" href="#trustedanalytics.Pandas.field_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Schema field types</p>
<p>List of field types from the schema stored in the trustedanalytics pandas dataframe object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">list of types</p>
<blockquote class="last">
<div><p>Field types</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>For this example, we are going to use a pandas dataframe object <em>your_pandas</em> .
It will have two columns <em>col1</em> and <em>col2</em> with types of <em>int32</em> and <em>float32</em> respectively:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my_pandas</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">PandasFrame</span><span class="p">(</span><span class="n">your_pandas</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">float32</span><span class="p">)])</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_csv</span><span class="o">.</span><span class="n">field_types</span><span class="p">())</span>
</pre></div>
</div>
<p>The output would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="uploadrows">
<h2><a class="toc-backref" href="#id8">UploadRows</a><a class="headerlink" href="#uploadrows" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.UploadRows">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">UploadRows</code><span class="sig-paren">(</span><em>data</em>, <em>schema</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.UploadRows" title="Permalink to this definition">¶</a></dt>
<dd><p>Raw data source for upload: list of lists + schema</p>
<dl class="method">
<dt id="trustedanalytics.UploadRows.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>schema</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.UploadRows.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Data source to upload raw list data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data: list</strong></p>
<blockquote>
<div><p>List of lists, where each item in the list represents a raw row data</p>
</div></blockquote>
<p><strong>schema: list of tuples</strong></p>
<blockquote class="last">
<div><p>List of tuples (column_name, data_type)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">]],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.3</span><span class="p">]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">ta</span><span class="o">.</span><span class="n">vector</span><span class="p">(</span><span class="mi">2</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">UploadRows</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">schema</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
<span class="go">[#]  n      s           v</span>
<span class="go">=========================</span>
<span class="go">[0]  1  one    [1.0, 1.1]</span>
<span class="go">[1]  2  two    [2.0, 2.2]</span>
<span class="go">[2]  3  three  [3.0, 3.3]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="xmlfile">
<h2><a class="toc-backref" href="#id9">XmlFile</a><a class="headerlink" href="#xmlfile" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="trustedanalytics.XmlFile">
<em class="property">class </em><code class="descclassname">trustedanalytics.</code><code class="descname">XmlFile</code><span class="sig-paren">(</span><em>file_name</em>, <em>tag_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.XmlFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an file as having data in XML format.</p>
<dl class="method">
<dt id="trustedanalytics.XmlFile.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>file_name</em>, <em>tag_name</em><span class="sig-paren">)</span><a class="headerlink" href="#trustedanalytics.XmlFile.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an file as having data in XML format.</p>
<p>When XML files are loaded into the system, individual records are separated
into the highest level elements found with the specified tag name and
placed into a column called data_lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_name</strong> : str</p>
<blockquote>
<div><p>Name of data input file.
File must be in the Hadoop file system.
Relative paths are interpreted relative to the
<code class="docutils literal"><span class="pre">trustedanalytics.atk.engine.fs.root</span></code> configuration.
Absolute paths (beginning with <code class="docutils literal"><span class="pre">hdfs://...</span></code>, for example) are also
supported.
See <span class="xref std std-ref">Configure File System Root</span>.</p>
</div></blockquote>
<p><strong>tag_name</strong> : str</p>
<blockquote>
<div><p>Tag name used to determine the split of elements into separate records.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">class</p>
<blockquote class="last">
<div><p>An object which holds both the name and tag of a XML file.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Given a raw data file named &#8216;raw_data.xml&#8217; located at
&#8216;hdfs://localhost.localdomain/user/trusted/data/&#8217;.
It consists of a root element called <em>shapes</em> with subelements with the
tag names <em>square</em> and <em>triangle</em>.
Each of these subelements has two potential subelements called <em>name</em> and
<em>size</em>.
One of the elements has an attribute called <em>color</em>.
Additionally, the subelement <em>triangle</em> is not needed so we can skip it
during the import.</p>
<p>The example XML file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;shapes&gt;
    &lt;square&gt;
        &lt;name&gt;left&lt;/name&gt;
        &lt;size&gt;3&lt;/size&gt;
    &lt;/square&gt;
    &lt;triangle&gt;
        &lt;size&gt;3&lt;/size&gt;
    &lt;/triangle&gt;
    &lt;square color=&quot;blue&quot;&gt;
        &lt;name&gt;right&lt;/name&gt;
        &lt;size&gt;5&lt;/size&gt;
    &lt;/square&gt;
&lt;/shapes&gt;
</pre></div>
</div>
<p>Import the Trusted Analytics Platform:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">trustedanalytics</span> <span class="kn">as</span> <span class="nn">ta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Define the data:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xml_file</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">XmlFile</span><span class="p">(</span><span class="s2">&quot;data/raw_data.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;square&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a frame using this XmlFile:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">xml_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The frame looks like:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span>  data_lines
/------------------------/
  &#39;&lt;square&gt;
        &lt;name&gt;left&lt;/name&gt;
        &lt;size&gt;3&lt;/size&gt;
   &lt;/square&gt;&#39;
  &#39;&lt;square color=&quot;blue&quot;&gt;
        &lt;name&gt;right&lt;/name&gt;
        &lt;size&gt;5&lt;/size&gt;
   &lt;/square&gt;&#39;
</pre></div>
</div>
<p>Parse values out of the XML column using the add_columns method:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_my_xml</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">ET</span>
<span class="gp">... </span>    <span class="n">ele</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">ele</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">),</span> <span class="n">ele</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ele</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">add_columns</span><span class="p">(</span><span class="n">parse_my_xml</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)])</span>
</pre></div>
</div>
<p>Original XML column is no longer necessary:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">drop_columns</span><span class="p">([</span><span class="s1">&#39;data_lines&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Result:</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go">  color:str   name:str    size:str</span>
<span class="go">/----------------------------------/</span>
<span class="go">  None        left        3</span>
<span class="go">  blue        right       5</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2015, Intel.
      </li>
      <li>
      Last updated on Apr 14, 2016.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>