<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>LdaModel train &mdash; Trusted Analytics Platform 0.4.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../f_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../f_static/css/spc-extend.css">
    <link rel="stylesheet" href="../../../f_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../../../f_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../f_static/jquery.js"></script>
    <script type="text/javascript" src="../../../f_static/underscore.js"></script>
    <script type="text/javascript" src="../../../f_static/doctools.js"></script>
    <script type="text/javascript" src="../../../f_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" >
    <link rel="top" title="Trusted Analytics Platform 0.4.0 documentation" href="../../../index.html" >
    <link rel="up" title="Models LdaModel" href="index.html" >
    <link rel="next" title="Models LogisticRegressionModel" href="../model-logistic_regression/index.html" >
    <link rel="prev" title="LdaModel status" href="status.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../../../index.html">Trusted Analytics</a></li>
	
          <li class="active"><a href="../../index.html" >Python API</a></li>
          <li class="active"><a href="../index.html" >Models</a></li>
          <li class="active"><a href="index.html" accesskey="U"><code class="docutils literal"><span class="pre">Models</span></code> LdaModel</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="status.html" title="LdaModel status"
           accesskey="P">previous</a>
      </li>
      <li class="active">
        <a href="../model-logistic_regression/index.html" title="Models LogisticRegressionModel"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="../../../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Technical Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ds_over.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_over.html">Extending Trusted Analytics Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ad_over.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rest_api/v1/index.html">REST API</a></li>
</ul>
<ul class="simple">
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="ldamodel-train">
<span id="python-api-models-model-lda-train"></span><h1><a class="reference internal" href="index.html"><em>LdaModel</em></a>  train<a class="headerlink" href="#ldamodel-train" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<dl class="function">
<dt id="train">
<code class="descname">train</code><span class="sig-paren">(</span><em>self</em>, <em>frame</em>, <em>document_column_name</em>, <em>word_column_name</em>, <em>word_count_column_name</em>, <em>max_iterations=20</em>, <em>alpha=1.10000002384</em>, <em>beta=1.10000002384</em>, <em>num_topics=10</em>, <em>random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#train" title="Permalink to this definition">¶</a></dt>
<dd><p><abbr title="This is a function or feature which has been developed, but has not been completely tested.  Use this function with caution.  This function may be changed or eliminated in future releases.">[ALPHA]</abbr>
Creates Latent Dirichlet Allocation model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>frame</strong> : Frame</p>
<blockquote>
<div><p>Input frame data.</p>
</div></blockquote>
<p><strong>document_column_name</strong> : unicode</p>
<blockquote>
<div><p>Column Name for documents.
Column should contain a str value.</p>
</div></blockquote>
<p><strong>word_column_name</strong> : unicode</p>
<blockquote>
<div><p>Column name for words.
Column should contain a str value.</p>
</div></blockquote>
<p><strong>word_count_column_name</strong> : unicode</p>
<blockquote>
<div><p>Column name for word count.
Column should contain an int32 or int64 value.</p>
</div></blockquote>
<p><strong>max_iterations</strong> : int32 (default=20)</p>
<blockquote>
<div><p>The maximum number of iterations that the algorithm will execute.
The valid value range is all positive int.
Default is 20.</p>
</div></blockquote>
<p><strong>alpha</strong> : float32 (default=1.10000002384)</p>
<blockquote>
<div><p>The <a class="reference internal" href="../../../glossary.html#term-hyperparameter"><span class="xref std std-term">hyperparameter</span></a> for document-specific distribution over topics.
Mainly used as a smoothing parameter in <a class="reference internal" href="../../../glossary.html#term-bayesian-inference"><span class="xref std std-term">Bayesian inference</span></a>.
Larger value implies that documents are assumed to cover all topics
more uniformly; smaller value implies that documents are more
concentrated on a small subset of topics.
Valid value range is all positive float greater than or equal to 1.</p>
<blockquote>
<div><p>Default is 0.1.</p>
</div></blockquote>
</div></blockquote>
<p><strong>beta</strong> : float32 (default=1.10000002384)</p>
<blockquote>
<div><p>The <a class="reference internal" href="../../../glossary.html#term-hyperparameter"><span class="xref std std-term">hyperparameter</span></a> for word-specific distribution over topics.
Mainly used as a smoothing parameter in <a class="reference internal" href="../../../glossary.html#term-bayesian-inference"><span class="xref std std-term">Bayesian inference</span></a>.
Larger value implies that topics contain all words more uniformly and
smaller value implies that topics are more concentrated on a small
subset of words.
Valid value range is all positive float greater than or equal to 1.
Default is 0.1.</p>
</div></blockquote>
<p><strong>num_topics</strong> : int32 (default=10)</p>
<blockquote>
<div><p>The number of topics to identify in the LDA model.
Using fewer topics will speed up the computation, but the extracted topics
might be more abstract or less specific; using more topics will
result in more computation but lead to more specific topics.
Valid value range is all positive int.
Default is 10.</p>
</div></blockquote>
<p><strong>random_seed</strong> : int64 (default=None)</p>
<blockquote>
<div><p>An optional random seed.
The random seed is used to initialize the pseudorandom number generator
used in the LDA model. Setting the random seed to the same value every
time the model is trained, allows LDA to generate the same topic distribution
if the corpus and LDA parameters are unchanged.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">: dict</p>
<blockquote class="last">
<div><p>The data returned is composed of multiple components:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><strong>Frame</strong> : <em>topics_given_doc</em></div>
<div class="line-block">
<div class="line">Conditional probabilities of topic given document.</div>
</div>
<div class="line"><strong>Frame</strong> : <em>word_given_topics</em></div>
<div class="line-block">
<div class="line">Conditional probabilities of word given topic.</div>
</div>
<div class="line"><strong>Frame</strong> : <em>topics_given_word</em></div>
<div class="line-block">
<div class="line">Conditional probabilities of topic given word.</div>
</div>
<div class="line"><strong>str</strong> : <em>report</em></div>
<div class="line-block">
<div class="line">The configuration and learning curve report for Latent Dirichlet</div>
</div>
</div>
</div></blockquote>
<p>Allocation as a multiple line str.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>See the discussion about <a class="reference external" href="http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation">Latent Dirichlet Allocation at Wikipedia.</a></p>
<p class="rubric">Examples</p>
<p>Inspect the input frame:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go">doc_id:unicode   word_id:unicode   word_count:int64</span>
<span class="go">\-------------------------------------------------------\</span>
<span class="go">  nytimes          harry                            3</span>
<span class="go">  nytimes          economy                         35</span>
<span class="go">  nytimes          jobs                            40</span>
<span class="go">  nytimes          magic                            1</span>
<span class="go">  nytimes          realestate                      15</span>
<span class="go">  nytimes          movies                           6</span>
<span class="go">  economist        economy                         50</span>
<span class="go">  economist        jobs                            35</span>
<span class="go">  economist        realestate                      20</span>
<span class="go">  economist        movies                           1</span>
</pre></div>
</div>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_model</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">LdaModel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="s">&#39;doc_id&#39;</span><span class="p">,</span> <span class="s">&#39;word_id&#39;</span><span class="p">,</span> <span class="s">&#39;word_count&#39;</span><span class="p">,</span> <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">num_topics</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The variable <em>results</em> is a dictionary with four keys:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">topics_given_doc</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;topics_given_doc&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">word_given_topics</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;word_given_topics&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">topics_given_word</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;topics_given_word&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">report</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">&#39;report&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Inspect the results:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;conditional probability of topics given document&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">topics_given_doc</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go"> doc_id:unicode         topic_probabilities:vector(2)</span>
<span class="go">\--------------------------------------------------------------\</span>
<span class="go">  nytimes           [0.6411692639409163, 0.3588307360590836]</span>
<span class="go">  economist        [0.8729037921033002, 0.12709620789669976]</span>
<span class="go">  harrypotter      [0.04037038771254577, 0.9596296122874542]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;conditional probability of word given topics&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">word_given_topics</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go"> word_id:unicode          topic_probabilities:vector(2)</span>
<span class="go">\-----------------------------------------------------------------\</span>
<span class="go">  jobs                [0.310153576632259, 0.15771353529047744]</span>
<span class="go">  realestate        [0.19982350094988224, 0.026879558761907126]</span>
<span class="go">  secrets           [0.002344603492542889, 0.16832490819830945]</span>
<span class="go">  magic             [0.015459535145939628, 0.16833906458965853]</span>
<span class="go">  chamber           [0.008569051106470452, 0.10657403682025736]</span>
<span class="go">  economy            [0.4842227935973047, 0.06458045349269073]</span>
<span class="go">  harry             [0.019215463609876204, 0.23279687893102033]</span>
<span class="go">  movies            [0.03728831237906273, 0.008577561181278793]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;conditional probability of topics given word&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">topics_given_word</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>

<span class="go"> word_id:unicode         topic_probabilities:vector(2)</span>
<span class="go">\----------------------------------------------------------------\</span>
<span class="go">  chamber           [0.060256136055438406, 0.9397438639445616]</span>
<span class="go">  movies             [0.797036385540048, 0.2029636144599522]</span>
<span class="go">  secrets           [0.008569949938887081, 0.9914300500611131]</span>
<span class="go">  magic              [0.0704558957152857, 0.9295441042847143]</span>
<span class="go">  harry             [0.06424184587002194, 0.9357581541299779]</span>
<span class="go">  realestate        [0.8666980184047205, 0.13330198159527962]</span>
<span class="go">  jobs              [0.6285123369605498, 0.37148766303945036]</span>
<span class="go">  economy            [0.8664742287086458, 0.1335257712913541]</span>
</pre></div>
</div>
<p>View the report:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">report</span>

<span class="go">======Graph Statistics======</span>
<span class="go">Number of vertices: 11 (doc: 3, word: 8)</span>
<span class="go">Number of edges: 32</span>

<span class="go">======LDA Configuration======</span>
<span class="go">numTopics: 2</span>
<span class="go">alpha: 0.100000</span>
<span class="go">beta: 0.100000</span>
<span class="go">maxIterations: 3</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2015, Intel.
      </li>
      <li>
      Last updated on Oct 22, 2015.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>