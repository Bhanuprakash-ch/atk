<!--

     Copyright (c) 2015 Intel Corporation 

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.

-->
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Cumulative Sum &mdash; Trusted Analytics Platform 0.6.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="R_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="R_static/css/spc-extend.css">
    <link rel="stylesheet" href="R_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="R_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="R_static/jquery.js"></script>
    <script type="text/javascript" src="R_static/underscore.js"></script>
    <script type="text/javascript" src="R_static/doctools.js"></script>
    <script type="text/javascript" src="R_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="top" title="Trusted Analytics Platform 0.6.0 documentation" href="index.html" >
    <link rel="up" title="Process Flow Examples" href="ds_pflw.html" >
    <link rel="next" title="Naive Bayes" href="ds_naive_bayes.html" >
    <link rel="prev" title="Process Flow Examples" href="ds_pflw.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="index.html">Trusted Analytics</a></li>
	
          <li class="active"><a href="ds_over.html" >User Manual</a></li>
          <li class="active"><a href="ds_pflw.html" accesskey="U">Process Flow Examples</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="ds_pflw.html" title="Process Flow Examples"
           accesskey="P">previous</a>
      </li>
      <li class="active">
        <a href="ds_naive_bayes.html" title="Naive Bayes"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Technical Summary</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ds_over.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ds_strt.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ds_pflw.html">Process Flow Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="ds_algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="ds_bkm.html">Best Known Methods (User)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_over.html">Extending Trusted Analytics Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad_over.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api/v1/index.html">REST API</a></li>
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="cumulative-sum">
<span id="ds-cumulsum"></span><h1>Cumulative Sum<a class="headerlink" href="#cumulative-sum" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Establish a connection to the ATK REST Server.
This handle will be used for the remainder of the script.</p>
<p>Get the server URL and credentials file from the TAP administrator.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">atk_server_uri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ATK_SERVER_URI&quot;</span><span class="p">,</span> <span class="n">ia</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
<span class="n">credentials_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ATK_CREDENTIALS&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Set the server, and use the credentials to connect to the ATK REST server.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">ia</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="n">atk_server_uri</span>
<span class="n">ia</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">credentials_file</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="workflow">
<h3>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<p>The general workflow will build a frame, then run some analytics on the frame.</p>
</div>
</div>
<div class="section" id="build-a-frame">
<h2>Build a Frame<a class="headerlink" href="#build-a-frame" title="Permalink to this headline">¶</a></h2>
<p>Construct a frame to be uploaded, this is done using Python lists uploaded to the server.
The following frame could represent some ordered list (such as customer orders) and a value associated with the order.
The frame is sorted by the order column, and then the order value is accumulated.</p>
<p>Cumulative sum finds the sum up to and including a given order.</p>
<p>Describe the frame to be built.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">rows_frame</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">UploadRows</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">90</span><span class="p">]],</span>
                           <span class="p">[(</span><span class="s2">&quot;order&quot;</span><span class="p">,</span> <span class="n">ia</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span>
                            <span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">ia</span><span class="o">.</span><span class="n">int32</span><span class="p">)])</span>
</pre></div>
</div>
<p>Build the frame described in in the UploadRows object.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">frame</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">rows_frame</span><span class="p">)</span>

<span class="nb">print</span> <span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="operate-on-the-frame">
<h2>Operate on the Frame<a class="headerlink" href="#operate-on-the-frame" title="Permalink to this headline">¶</a></h2>
<p>Sort the frame by the order columns, note this is a side effect based operation.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">frame</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Calculate the cumulative sum.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">frame</span><span class="o">.</span><span class="n">cumulative_sum</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

 <span class="nb">print</span> <span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
</pre></div>
</div>
<p>Fetch the results, and validate they are what you would expect.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">row_count</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2015, Intel.
      </li>
      <li>
      Last updated on Oct 14, 2016.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>